/*! For license information please see offcanvas.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("./util/index"),require("./util/scrollbar"),require("./dom/event-handler"),require("./base-component"),require("./dom/selector-engine"),require("./util/backdrop"),require("./util/focustrap"),require("./util/component-functions")):"function"==typeof define&&define.amd?define(["./util/index","./util/scrollbar","./dom/event-handler","./base-component","./dom/selector-engine","./util/backdrop","./util/focustrap","./util/component-functions"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Offcanvas=t(e.Index,e.Scrollbar,e.EventHandler,e.BaseComponent,e.SelectorEngine,e.Backdrop,e.Focustrap,e.ComponentFunctions)}(this,(function(e,t,i,s,n,o,a,r){"use strict";const l=e=>e&&"object"==typeof e&&"default"in e?e:{default:e},d=l(t),c=l(i),h=l(s),u=l(n),f=l(o),m=l(a),p=".bs.offcanvas",g=".data-api",_=`load${p}${g}`,b="show",w="showing",k="hiding",v=".offcanvas.show",y=`show${p}`,$=`shown${p}`,E=`hide${p}`,q=`hidePrevented${p}`,C=`hidden${p}`,S=`resize${p}`,A=`click${p}${g}`,T=`keydown.dismiss${p}`,x={backdrop:!0,keyboard:!0,scroll:!1},D={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class I extends h.default{constructor(e,t){super(e,t),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return x}static get DefaultType(){return D}static get NAME(){return"offcanvas"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||c.default.trigger(this._element,y,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new d.default).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(w),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(b),this._element.classList.remove(w),c.default.trigger(this._element,$,{relatedTarget:e})}),this._element,!0))}hide(){this._isShown&&(c.default.trigger(this._element,E).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(k),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(b,k),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new d.default).reset(),c.default.trigger(this._element,C)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const e=Boolean(this._config.backdrop);return new f.default({className:"offcanvas-backdrop",isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?()=>{"static"!==this._config.backdrop?this.hide():c.default.trigger(this._element,q)}:null})}_initializeFocusTrap(){return new m.default({trapElement:this._element})}_addEventListeners(){c.default.on(this._element,T,(e=>{"Escape"===e.key&&(this._config.keyboard?this.hide():c.default.trigger(this._element,q))}))}static jQueryInterface(e){return this.each((function(){const t=I.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===t[e]||e.startsWith("_")||"constructor"===e)throw new TypeError(`No method named "${e}"`);t[e](this)}}))}}return c.default.on(document,A,'[data-bs-toggle="offcanvas"]',(function(t){const i=e.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),e.isDisabled(this))return;c.default.one(i,C,(()=>{e.isVisible(this)&&this.focus()}));const s=u.default.findOne(v);s&&s!==i&&I.getInstance(s).hide(),I.getOrCreateInstance(i).toggle(this)})),c.default.on(window,_,(()=>{for(const e of u.default.find(v))I.getOrCreateInstance(e).show()})),c.default.on(window,S,(()=>{for(const e of u.default.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(e).position&&I.getOrCreateInstance(e).hide()})),r.enableDismissTrigger(I),e.defineJQueryPlugin(I),I}));