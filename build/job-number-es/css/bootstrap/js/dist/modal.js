/*! For license information please see modal.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("./util/index"),require("./dom/event-handler"),require("./dom/selector-engine"),require("./util/scrollbar"),require("./base-component"),require("./util/backdrop"),require("./util/focustrap"),require("./util/component-functions")):"function"==typeof define&&define.amd?define(["./util/index","./dom/event-handler","./dom/selector-engine","./util/scrollbar","./base-component","./util/backdrop","./util/focustrap","./util/component-functions"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).Modal=t(e.Index,e.EventHandler,e.SelectorEngine,e.Scrollbar,e.BaseComponent,e.Backdrop,e.Focustrap,e.ComponentFunctions)}(this,(function(e,t,i,s,n,o,a,l){"use strict";const d=e=>e&&"object"==typeof e&&"default"in e?e:{default:e},r=d(t),h=d(i),c=d(s),u=d(n),_=d(o),m=d(a),f=".bs.modal",g=`hide${f}`,p=`hidePrevented${f}`,b=`hidden${f}`,w=`show${f}`,y=`shown${f}`,k=`resize${f}`,v=`click.dismiss${f}`,T=`mousedown.dismiss${f}`,A=`keydown.dismiss${f}`,L=`click${f}.data-api`,E="modal-open",$="show",q="modal-static",B={backdrop:!0,focus:!0,keyboard:!0},D={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class S extends u.default{constructor(e,t){super(e,t),this._dialog=h.default.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new c.default,this._addEventListeners()}static get Default(){return B}static get DefaultType(){return D}static get NAME(){return"modal"}toggle(e){return this._isShown?this.hide():this.show(e)}show(e){this._isShown||this._isTransitioning||r.default.trigger(this._element,w,{relatedTarget:e}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(E),this._adjustDialog(),this._backdrop.show((()=>this._showElement(e))))}hide(){this._isShown&&!this._isTransitioning&&(r.default.trigger(this._element,g).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove($),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){for(const e of[window,this._dialog])r.default.off(e,f);this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new _.default({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new m.default({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const i=h.default.findOne(".modal-body",this._dialog);i&&(i.scrollTop=0),e.reflow(this._element),this._element.classList.add($),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,r.default.trigger(this._element,y,{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){r.default.on(this._element,A,(e=>{if("Escape"===e.key)return this._config.keyboard?(e.preventDefault(),void this.hide()):void this._triggerBackdropTransition()})),r.default.on(window,k,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),r.default.on(this._element,T,(e=>{r.default.one(this._element,v,(t=>{this._element===e.target&&this._element===t.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(E),this._resetAdjustments(),this._scrollBar.reset(),r.default.trigger(this._element,b)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(r.default.trigger(this._element,p).defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,t=this._element.style.overflowY;"hidden"===t||this._element.classList.contains(q)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(q),this._queueCallback((()=>{this._element.classList.remove(q),this._queueCallback((()=>{this._element.style.overflowY=t}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,i=this._scrollBar.getWidth(),s=i>0;if(s&&!t){const t=e.isRTL()?"paddingLeft":"paddingRight";this._element.style[t]=`${i}px`}if(!s&&t){const t=e.isRTL()?"paddingRight":"paddingLeft";this._element.style[t]=`${i}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(e,t){return this.each((function(){const i=S.getOrCreateInstance(this,e);if("string"==typeof e){if(void 0===i[e])throw new TypeError(`No method named "${e}"`);i[e](t)}}))}}return r.default.on(document,L,'[data-bs-toggle="modal"]',(function(t){const i=e.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),r.default.one(i,w,(t=>{t.defaultPrevented||r.default.one(i,b,(()=>{e.isVisible(this)&&this.focus()}))}));const s=h.default.findOne(".modal.show");s&&S.getInstance(s).hide(),S.getOrCreateInstance(i).toggle(this)})),l.enableDismissTrigger(S),e.defineJQueryPlugin(S),S}));